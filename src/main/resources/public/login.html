<!DOCTYPE html>
<html>
<head>
    <title>HTML Login Form</title>
    <link rel="stylesheet" href="style.css">
</head>

<script>
    function validateForm() {
        let name = document.getElementById("username").value;
        let pass = document.getElementById("password").value;
        if (name == "") {
            alert("Login username must be entered.");
            return false;
        }
        if (pass == "") {
            alert("Login password must be entered.");
            return false;
        }
        sendform();
        return false;
    }
</script>

<script>
    function sendform() {
        // Creating XMLHttpRequest object
        var qhttp = new XMLHttpRequest();
        // Open the given file
        qhttp.open("POST", "https://localhost:8443/login", true);
        qhttp.onreadystatechange = function() {
            // Creating call back function
            console.log("onreadystate");
            if (qhttp.readyState === 4 && qhttp.status === 200) {
                alert(qhttp.responseText);
            }
            else {
                console.log("error");
                alert("error");
            }
        }
        // Setting HTTP request header
        qhttp.setRequestHeader('Content-type', 'application/json')
        // Sending the JSON document to the server
        name = document.getElementById("username").value;
        pass = document.getElement  ById("password").value;
        qhttp.send(JSON.stringify({
            "username": name,
            "password": pass
        }));
        return false;
    }
</script>

<body>
    <div class="main">
        <h1>Secure Chat System</h1>
        <h3>Enter your login credentials</h3>
        <form action="/login" method="POST" id="fid" onsubmit="return validateForm()">
            <label for="username">
                Username:
            </label>
            <input type="text" id="username" name="username"
                placeholder="Enter your Username" required>
            <label for="password">
                Password:
            </label>
            <input type="password" id="password" name="password" 
                placeholder="Enter your Password" required>

            <div class="wrap">
                <button type="submit">
                    Submit
                </button>
            </div>
        </form>
        
        <p>Not registered?
            <a href="/create.html" style="text-decoration: none;">
                Create an account
            </a>
        </p>
    </div>
</body>

</html>

